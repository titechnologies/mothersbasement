<?php
/**
 * BelVG LLC.
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the EULA
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://store.belvg.com/BelVG-LICENSE-COMMUNITY.txt
 *
 /***************************************
 *         MAGENTO EDITION USAGE NOTICE *
 *****************************************/
 /* This package designed for Magento COMMUNITY edition
 * BelVG does not guarantee correct work of this extension
 * on any other Magento edition except Magento COMMUNITY edition.
 * BelVG does not provide extension support in case of
 * incorrect edition usage.
 /***************************************
 *         DISCLAIMER                   *
 *****************************************/
 /* Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future.
 *****************************************************
 * @category   Belvg
 * @package    Belvg_Android
 * @copyright  Copyright (c) 2010 - 2011 BelVG LLC. (http://www.belvg.com)
 * @license    http://store.belvg.com/BelVG-LICENSE-COMMUNITY.txt
 */
?>
<div class="discount-codes">
	<form id="discount-coupon-form" action="<?php echo $this->getUrl('checkout/cart/couponPost') ?>" method="post">
		<div class="content">
			<ul class="form-list">
				<li>
					<label><?php echo $this->__('Discount Codes') ?></label>
					<?php if(!strlen($this->getCouponCode())): /* wtf? */?>
						<input class="input-text" id="coupon_code" name="coupon_code" value="<?php echo $this->htmlEscape($this->getCouponCode()) ?>">
					<?php else: ?>
						<input class="input-text" id="coupon_code" name="coupon_code" value="<?php echo $this->htmlEscape($this->getCouponCode()) ?>">
					<?php endif;?>
					<input type="hidden" name="remove" id="remove-coupone" value="0">
				</li>
			</ul>
			<div class="button-set">
				<?php if(!strlen($this->getCouponCode())): ?>
					<button class="form-button" onclick="discountForm.submit(false)" type="button" value="<?php echo $this->__('Apply Coupon') ?>"><span><?php echo $this->__('Apply') ?></span></button>
				<?php else: ?>
					<button class="form-button" onclick="discountForm.submit(false)" type="button"value="<?php echo $this->__('Apply Coupon') ?>"><span><?php echo $this->__('Apply') ?></span></button>
					<button class="form-button" type="button" onclick="discountForm.submit(true)" value="<?php echo $this->__('Cancel Coupon') ?>"><span><?php echo $this->__('Cancel') ?></span></button>
				<?php endif; ?>
			</div>
			<p><?php echo $this->__('Enter your coupon code if you have one.') ?></p>
		</div>
	</form>
</div>
<script>
	var discountForm = new VarienForm('discount-coupon-form');
	discountForm.submit = function (isRemove) {
		if (isRemove) {
			$('coupon_code').removeClassName('required-entry');
			$('remove-coupone').value = "1";
		} else {
			$('coupon_code').addClassName('required-entry');
			$('remove-coupone').value = "0";
		}
		return VarienForm.prototype.submit.bind(discountForm)();
	}
</script>
