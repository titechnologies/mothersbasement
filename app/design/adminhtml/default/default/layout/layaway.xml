<?xml version="1.0"?>
<!--
/*////////////////////////////////////////////////////////////////////////////////
 \\\\\\\\\\\\\\\\\\\\\\\\\   FME Layaway extension  \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
 /////////////////////////////////////////////////////////////////////////////////
 \\\\\\\\\\\\\\\\\\\\\\\\\ NOTICE OF LICENSE\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
 ///////                                                                   ///////
 \\\\\\\ This source file is subject to the Open Software License (OSL 3.0)\\\\\\\
 ///////   that is bundled with this package in the file LICENSE.txt.      ///////
 \\\\\\\   It is also available through the world-wide-web at this URL:    \\\\\\\
 ///////          http://opensource.org/licenses/osl-3.0.php               ///////
 \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
 ///////                      * @category   FME                            ///////
 \\\\\\\                      * @package    FME_Layaway                    \\\\\\\
 ///////    * @author     Malik Tahir Mehmood <malik.tahir786@gmail.com>   ///////
 \\\\\\\                                                                   \\\\\\\
 /////////////////////////////////////////////////////////////////////////////////
 \\* @copyright  Copyright 2010 Â© free-magentoextensions.com All right reserved\\\
 /////////////////////////////////////////////////////////////////////////////////
 */
-->
<layout version="0.1.0">
    <layawayadmin_adminhtml_layaway_index>
        <reference name="content">
            <block type="layaway/adminhtml_layaway" name="layaway" />
        </reference>
    </layawayadmin_adminhtml_layaway_index>
     <layawayadmin_adminhtml_layaway_view>
        <reference name="head">
            <action method="addJs"><file>mage/adminhtml/giftmessage.js</file></action>
            <action method="addJs"><file>mage/adminhtml/giftoptions/tooltip.js</file></action>
        </reference>
        <reference name="content">
            <block type="layaway/adminhtml_layaway_view" name="layaway_order_view"></block>
        </reference>
        <reference name="left">
            <block type="layaway/adminhtml_layaway_edit_tabs" name="layaway_tabs">
                <block type="layaway/adminhtml_layaway_edit_tab_layaway" name="layaway_order_detail" template="layaway/sales/order/detail.phtml">
                    <block type="adminhtml/sales_order_view_tab_info" name="order_tab_info" template="sales/order/view/tab/info.phtml">
                        <block type="adminhtml/sales_order_view_messages" name="order_messages"></block>
                        <block type="adminhtml/sales_order_view_info" name="order_info" template="sales/order/view/info.phtml"></block>
                        <block type="adminhtml/sales_order_view_items" name="order_items" template="sales/order/view/items.phtml">
                            <action method="addItemRender"><type>default</type><block>adminhtml/sales_order_view_items_renderer_default</block><template>sales/order/view/items/renderer/default.phtml</template></action>
                            <action method="addColumnRender"><column>qty</column><block>adminhtml/sales_items_column_qty</block><template>sales/items/column/qty.phtml</template></action>
                            <action method="addColumnRender"><column>name</column><block>adminhtml/sales_items_column_name</block><template>sales/items/column/name.phtml</template></action>
                            <action method="addColumnRender"><column>name</column><block>adminhtml/sales_items_column_name_grouped</block><template>sales/items/column/name.phtml</template><type>grouped</type></action>
                            <block type="core/text_list" name="order_item_extra_info" />
                        </block>
                        <block type="adminhtml/sales_order_payment" name="order_payment"/>
                        <block type="adminhtml/sales_order_view_history" name="order_history" template="sales/order/view/history.phtml"></block>
                        <block type="adminhtml/template" name="gift_options" template="sales/order/giftoptions.phtml">
                            <block type="adminhtml/sales_order_view_giftmessage" name="order_giftmessage" template="sales/order/view/giftmessage.phtml"></block>
                        </block>
                        <block type="adminhtml/sales_order_totals" name="order_totals" template="sales/order/totals.phtml">
                            <block type="adminhtml/sales_order_totals_tax" name="tax" template="sales/order/totals/tax.phtml" />
                            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/total.phtml"></block>
                            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/total2.phtml"></block>
                        </block>
                    </block>
                </block>
                <action method="addTab"><name>layaway_info</name><block>layaway_order_detail</block></action>
                <action method="addTab"><name>layaway_installments</name><block>layaway/adminhtml_layaway_edit_tab_installments</block></action>
            </block>
        </reference>
    </layawayadmin_adminhtml_layaway_view>
    
    <adminhtml_sales_order_view>
        <reference name="order_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/total.phtml"></block>
            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/total2.phtml"></block>
            <!--<block type="adminhtml/sales_order_totals_item" name="layaway.refunded" template="layaway/sales/order/refunded.phtml">-->
            <!--    <action method="setDisplayArea"><area>footer</area></action>-->
            <!--    <action method="setAfterCondition"><condition>last</condition></action>-->
            <!--</block>-->
        </reference>
    </adminhtml_sales_order_view>

    <adminhtml_sales_order_invoice_new>
        <reference name="invoice_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/invoice_layawayfee.phtml"></block>
            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/invoice_layawayremaining.phtml"></block>
        </reference>
    </adminhtml_sales_order_invoice_new>

    <adminhtml_sales_order_invoice_updateqty>
        <reference name="invoice_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/invoice_layawayfee.phtml"></block>
            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/invoice_layawayremaining.phtml"></block>
        </reference>
    </adminhtml_sales_order_invoice_updateqty>

    <adminhtml_sales_order_invoice_view>
        <reference name="invoice_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/invoice_layawayfee.phtml"></block>
            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/invoice_layawayremaining.phtml"></block>
        </reference>
    </adminhtml_sales_order_invoice_view>

    <adminhtml_sales_order_creditmemo_new>
        <reference name="creditmemo_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/linked_layawayfee.phtml"></block>
            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/linked_layawayremaining.phtml"></block>
        </reference>
    </adminhtml_sales_order_creditmemo_new>

    <adminhtml_sales_order_creditmemo_updateqty>
        <reference name="creditmemo_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.fee" template="layaway/sales/order/linked_layawayfee.phtml"></block>
            <block type="adminhtml/sales_order_totals_item" name="layaway.remaining" template="layaway/sales/order/linked_layawayremaining.phtml"></block>
        </reference>
    </adminhtml_sales_order_creditmemo_updateqty>

<!--    <adminhtml_sales_order_creditmemo_view>
        <reference name="creditmemo_totals">
            <block type="adminhtml/sales_order_totals_item" name="layaway.refunded" template="layaway/sales/order/refunded.phtml">
                <action method="setDisplayArea"><area>footer</area></action>
            </block>
        </reference>
    </adminhtml_sales_order_creditmemo_view>-->
</layout>